=======
Browser
=======

First we'll create a browser and login as manager.

    >>> from Products.Five.testbrowser import Browser
    >>> browser = Browser()
    >>> browser.handleErrors = False
    >>> self.app.acl_users.userFolderAddUser('root', 'secret', ['Manager'], [])
    >>> browser.addHeader('Authorization', 'Basic root:secret')

Let's create a basic content type.

    >>> browser.open('http://nohost/plone/@@dexterity-types')
    >>> browser.getControl('Type Name').value = 'Pony'
    >>> browser.getControl('Add').click()
    >>> 'Item added successfully.' in browser.contents
    True

We can now add the layout behavior to our content type.

    >>> browser.open('http://nohost/plone/dexterity-types/pony/@@behaviors')
    >>> browser.getControl(name='form.widgets.behaviors:list').value = ['Dublin Core metadata', 'Layout support']
    >>> browser.getControl('Apply').click()
    >>> 'Data successfully updated.' in browser.contents
    True

Our new type should have the layout behavior assigned.

    >>> 'plone.layoutbehavior.ILayout' in self.portal.portal_types.pony.behaviors
    True

Next step is to add a content item.

    >>> browser.open('http://nohost/plone/++add++pony')
    >>> browser.getControl(name='form.widgets.IDublinCore.title').value = 'Pony'
    >>> browser.getControl('Save').click()
    >>> 'Item created' in browser.contents
    True

Config
------

Now let's open the Deco config view.

    >>> browser.open('http://nohost/plone/pony/@@deco-config')

The config view should contain a json structure with settings like
'primary_actions'.

    >>> browser.contents
    '{...primary_actions...}'
